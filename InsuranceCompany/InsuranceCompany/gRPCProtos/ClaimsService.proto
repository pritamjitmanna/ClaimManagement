// Summary:
// Protocol buffer definitions for the Claims gRPC service. This file declares:
// - The ClaimsService RPC methods used by clients to create, query and update claims.
// - Enum types (STATUSCODE, CLAIMSTATUS, STAGES, WITHDRAWSTATUS) used to transfer state.
// - DTO messages for request/response payloads and error lists.
// Notes:
// - google.protobuf.Any is used in CommonOutputgRPC to carry different payload types (packed messages).
// - Timestamp is used for date/time fields; wrappers (StringValue/Int32Value) are used for optional primitives.

syntax = "proto3";
option csharp_namespace = "gRPCClaimsService.Protos";
package claims;

import "google/protobuf/wrappers.proto";
import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";
import "SharedProtos.proto";

// ---------------------------Service----------------------------

// ClaimsService provides RPC methods for managing insurance claims.
// It allows clients to create new claims, retrieve claim information,
// generate status reports, and update claim approvals.
service ClaimsService {
    // Creates a new insurance claim with the provided claim details.
    rpc AddNewClaim(ClaimDetailRequestDTOgRPC)returns (shared.CommonOutputgRPC); 
    // Retrieves claim information by claim ID.
    rpc GetClaimByClaimId(GetClaimByIdString)returns (shared.CommonOutputgRPC);
    // Retrieves claim status reports for a specified month and year.
    rpc GetClaimStatusReports(GetClaimStatusReportsMonthAndYear)returns (shared.CommonOutputgRPC);
    // Retrieves payment status reports for a specified month and year.
    rpc GetPaymentStatusReports(GetPaymentStatusReportsMonthAndYear)returns (shared.CommonOutputgRPC);
    // Updates the claim amount approved by the surveyor for a specific claim and claimant.
    rpc UpdateClaimAmountApprovedBySurveyor(UpdateClaimAmountApprovedBySurveyorClaimIdClaimant)returns (shared.CommonOutputgRPC);
    // Accepts or rejects a claim based on the provided decision.
    rpc UpdateAcceptOrRejectClaim(AcceptReject)returns (shared.CommonOutputgRPC);
    

}

// -------------------------Enums------------------------------

enum CLAIMSTATUS
{
    CLOSED = 0;
    OPEN = 1;
}

enum STAGES
{
    NEWCLAIMS=0;
    PENDINGCLAIMS=1;
    FINALIZEDCLAIMS=2;
}

enum WITHDRAWSTATUS{
    NOSTATUS=0;
    ACCEPTED=1;
    WITHDRAWN=2;
}

message GetClaimByIdString{
    string ClaimId=1;
}



message GetClaimStatusReportsMonthAndYear{
    int32 Month=1;
    int32 Year=2;
}

message GetPaymentStatusReportsMonthAndYear{
    int32 Month=1;
    int32 Year=2;
}

message AcceptReject{
    string ClaimId=1;
    bool IsAccept=2;
}

message UpdateClaimAmountApprovedBySurveyorClaimIdClaimant{
    string ClaimID=1;
    int32 Claimant=2;
}


message ClaimDetailRequestDTOgRPC {
    google.protobuf.StringValue PolicyNo=1;
    google.protobuf.Int32Value EstimatedLoss=2;
    google.protobuf.Timestamp DateOfAccident=3; 
}

message ClaimDTOgRPC{
    string ClaimId=1;
    string PolicyNo=2;
    int32 EstimatedLoss=3;
    google.protobuf.Timestamp DateOfAccident=4;
    int32 SurveyorID=5;
    int32 AmtApprovedBySurveyor=6;
    bool InsuranceCompanyApproval=7;
    WITHDRAWSTATUS WithdrawClaim=8;
    CLAIMSTATUS ClaimStatus=9;
    google.protobuf.Int32Value SurveyorFees=10;
}



message ClaimStatusReportDTOgRPC{
    STAGES Stage=1;
    int32 Count=2;
}

message ClaimStatusReportsListgRPC{
    repeated ClaimStatusReportDTOgRPC reports=1;
}


message ClaimPaymentReportDTOgRPC
{
    int32 Month=1;
    int32 Year=2;
    int32 Amount=3;

}